<html>                                                                                         
<head>                                                                                         
    <title>flight</title>                                                            
    <link href="../base1/cockpit.css" type="text/css" rel="stylesheet">                        
    <link href="../base1/patternfly.css" type="text/css" rel="stylesheet">                     
    <link href="../base1/system.css"" type="text/css"  rel="stylesheet">                   
    <scrstyle="overflow-y: scroll;max-height: 250px;"ipt src="../base1/jquery.js"></script>    
    <script src="../base1/cockpit.js"></script>                                      
</head>                                                                                        
<body style="font-family: "Open Sans",Helvetica,Arial,sans-serif;                              
     font-size: 12px;                                                                
     line-height: 1.66666667;                                                        
     color: #363636;"                               
     onload="flightlogs()">                                                                    
      <div>                                                                                                        
      <div class="container-fluid">                                                                                
      <div class="panel panel-default" style="overflow-y: scroll;max-height: 250px;">                              
      <div class="panel-heading">Flight logs</div>                                                                 
      <table  class="table table-hover">                                                       
           <thead>                                                                                                 
              <th>Name</th>                                                                                        
              <th>Date</th>                                                                                        
              <th>Size</th>                                                                                        
           </thead>                                                                            
           <tbody id="myTable">                                                                                    
           </tbody>                                                                                                
      </table>                                                        
      </div>                                                                                                       
      </div>                                                                                   
      </div>                                                                                                       
      <pre id="output" style="background:white;"></pre>                                                            
      <script>                                             
                                                           
        function flightlogs() {                                                                
            var proc = cockpit.spawn(["sh", "/usr/share/cockpit/flight-logs/log-dir.sh"]);                    
            proc.stream(flight_name);                                                                              
                    }                                      
                                                    
        function flight_name(data) {                                  
            var LogFileName = data.split("\n");                                                                    
            var table = document.getElementById("myTable");                                    
                table.innerHTML=" ";                                                           
            for (i = 0; i < LogFileName.length - 1; i=i+3){                                    
                var row = table.insertRow(0);                                              
                var nameCell=row.insertCell(0);                                                
                var dateCell=row.insertCell(1);                                      
                var sizeCell=row.insertCell(2);                                                
                nameCell.innerHTML = LogFileName[i];                                           
                dateCell.innerHTML=LogFileName[i+1];                                 
                sizeCell.innerHTML=LogFileName[i+2];                                 
                row.id = LogFileName[i];                                                       
                row.onclick  = function () {                                                   
                      document.getElementById("output").innerHTML=" ";                                             
                      var proc = cockpit.spawn(["sh", "/usr/share/cockpit/flight-logs/get-logs.sh", this.id]);
                      proc.stream(get_logs);                                                                       
                      };                                                                                           
                                                                                                                   
              }                                                                                                    
                                                                                                                   
        }                                                                                                          
                                                                                                                   
        function get_logs(data) {                                                                                  
           output.append(document.createTextNode(data));                                                           
                                                                                                                   
        }                                                             
      </script>                                                                                                    
      <style>                                                                                  
        #output{                                                                                                   
        background: white;                                                                                         
        width: 97%;                                        
        height: 80%;                                                  
        margin-left: 2%;                                                                                           
        margin-top: 2%;                                                                                            
        border-left:1px solid black;                                                                               
        border-top:1px solid black;                        
        overflow: scroll;                                             
        }                                                                                                          
      </style>                                                                                                     
      </body>                                                                                                      
</html>
